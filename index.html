<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chrono Bulward</title>
<style>
  body { margin:0; background:#222; color:#eee; font-family:monospace; text-align:center; }
  #gameCanvas { background:#333; display:none; margin:0 auto; border:2px solid #000; }
  #menu, #settings { margin-top:20px; }
  h1 { margin:20px; }
  h2 { margin-top:30px; }
  .unit-settings { border:1px solid #555; padding:10px; margin:10px auto; width:90%; max-width:400px; text-align:left; }
  input[type=range] { width:200px; }
</style>
</head>
<body>
<h1 id="title">Chrono Bulward</h1>

<div id="menu">
  <button onclick="startGame()">ゲーム開始</button>
  <button onclick="showSettings()">設定</button>
</div>

<div id="settings" style="display:none;">
  <h2>ユニット調整</h2>

  <!-- プレイヤーユニット -->
  <div class="unit-settings">
    <h3>剣士</h3>
    HP: <input type="range" id="swordsman_hp" min="50" max="300" value="120" oninput="updateLabel('swordsman_hp')">
    <span id="swordsman_hp_val">120</span><br>
    攻撃力: <input type="range" id="swordsman_atk" min="5" max="30" value="10" oninput="updateLabel('swordsman_atk')">
    <span id="swordsman_atk_val">10</span><br>
    速度: <input type="range" id="swordsman_spd" min="0.1" max="1.0" step="0.05" value="0.25" oninput="updateLabel('swordsman_spd')">
    <span id="swordsman_spd_val">0.25</span>
  </div>

  <div class="unit-settings">
    <h3>弓兵</h3>
    HP: <input type="range" id="archer_hp" min="40" max="200" value="80" oninput="updateLabel('archer_hp')">
    <span id="archer_hp_val">80</span><br>
    攻撃力: <input type="range" id="archer_atk" min="5" max="30" value="8" oninput="updateLabel('archer_atk')">
    <span id="archer_atk_val">8</span><br>
    速度: <input type="range" id="archer_spd" min="0.1" max="1.0" step="0.05" value="0.25" oninput="updateLabel('archer_spd')">
    <span id="archer_spd_val">0.25</span>
  </div>

  <div class="unit-settings">
    <h3>回復役</h3>
    HP: <input type="range" id="healer_hp" min="40" max="200" value="100" oninput="updateLabel('healer_hp')">
    <span id="healer_hp_val">100</span><br>
    回復量: <input type="range" id="healer_atk" min="5" max="30" value="10" oninput="updateLabel('healer_atk')">
    <span id="healer_atk_val">10</span><br>
    速度: <input type="range" id="healer_spd" min="0.1" max="1.0" step="0.05" value="0.25" oninput="updateLabel('healer_spd')">
    <span id="healer_spd_val">0.25</span>
  </div>

  <!-- 敵ユニット -->
  <div class="unit-settings">
    <h3>ゴブリン</h3>
    HP: <input type="range" id="goblin_hp" min="20" max="200" value="60" oninput="updateLabel('goblin_hp')">
    <span id="goblin_hp_val">60</span><br>
    攻撃力: <input type="range" id="goblin_atk" min="2" max="20" value="5" oninput="updateLabel('goblin_atk')">
    <span id="goblin_atk_val">5</span><br>
    速度: <input type="range" id="goblin_spd" min="0.1" max="1.0" step="0.05" value="0.2" oninput="updateLabel('goblin_spd')">
    <span id="goblin_spd_val">0.2</span>
  </div>

  <div class="unit-settings">
    <h3>オーク</h3>
    HP: <input type="range" id="orc_hp" min="100" max="500" value="200" oninput="updateLabel('orc_hp')">
    <span id="orc_hp_val">200</span><br>
    攻撃力: <input type="range" id="orc_atk" min="10" max="50" value="15" oninput="updateLabel('orc_atk')">
    <span id="orc_atk_val">15</span><br>
    速度: <input type="range" id="orc_spd" min="0.05" max="0.5" step="0.05" value="0.2" oninput="updateLabel('orc_spd')">
    <span id="orc_spd_val">0.2</span>
  </div>

  <div class="unit-settings">
    <h3>ゴーレム</h3>
    HP: <input type="range" id="golem_hp" min="200" max="1000" value="400" oninput="updateLabel('golem_hp')">
    <span id="golem_hp_val">400</span><br>
    攻撃力: <input type="range" id="golem_atk" min="10" max="50" value="20" oninput="updateLabel('golem_atk')">
    <span id="golem_atk_val">20</span><br>
    速度: <input type="range" id="golem_spd" min="0.05" max="0.3" step="0.05" value="0.1" oninput="updateLabel('golem_spd')">
    <span id="golem_spd_val">0.1</span>
  </div>

  <div class="unit-settings">
    <h3>シャーマン</h3>
    HP: <input type="range" id="shaman_hp" min="50" max="250" value="120" oninput="updateLabel('shaman_hp')">
    <span id="shaman_hp_val">120</span><br>
    攻撃力: <input type="range" id="shaman_atk" min="5" max="30" value="12" oninput="updateLabel('shaman_atk')">
    <span id="shaman_atk_val">12</span><br>
    速度: <input type="range" id="shaman_spd" min="0.1" max="0.5" step="0.05" value="0.25" oninput="updateLabel('shaman_spd')">
    <span id="shaman_spd_val">0.25</span>
  </div>

  <div class="unit-settings">
    <h3>ウルフ</h3>
    HP: <input type="range" id="wolf_hp" min="30" max="150" value="80" oninput="updateLabel('wolf_hp')">
    <span id="wolf_hp_val">80</span><br>
    攻撃力: <input type="range" id="wolf_atk" min="5" max="25" value="10" oninput="updateLabel('wolf_atk')">
    <span id="wolf_atk_val">10</span><br>
    速度: <input type="range" id="wolf_spd" min="0.2" max="1.0" step="0.05" value="0.5" oninput="updateLabel('wolf_spd')">
    <span id="wolf_spd_val">0.5</span>
  </div>

  <!-- ボス -->
  <div class="unit-settings">
    <h3>巨大オーガ（ボス）</h3>
    HP: <input type="range" id="ogre_hp" min="200" max="2000" value="600" oninput="updateLabel('ogre_hp')">
    <span id="ogre_hp_val">600</span><br>
    攻撃力: <input type="range" id="ogre_atk" min="20" max="200" value="40" oninput="updateLabel('ogre_atk')">
    <span id="ogre_atk_val">40</span>
  </div>

  <div class="unit-settings">
    <h3>邪竜（ボス）</h3>
    HP: <input type="range" id="dragon_hp" min="500" max="5000" value="1500" oninput="updateLabel('dragon_hp')">
    <span id="dragon_hp_val">1500</span><br>
    攻撃力: <input type="range" id="dragon_atk" min="50" max="500" value="100" oninput="updateLabel('dragon_atk')">
    <span id="dragon_atk_val">100</span>
  </div>

  <br>
  <button onclick="backToMenu()">戻る</button>
  <button onclick="applySettingsAndStart()">ゲーム開始</button>
</div>

<canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
let unitStats = {
  swordsman:{hp:120, atk:10, speed:0.25},
  archer:{hp:80, atk:8, speed:0.25},
  healer:{hp:100, atk:10, speed:0.25}, // atk=回復量
  goblin:{hp:60, atk:5, speed:0.2},
  orc:{hp:200, atk:15, speed:0.2},
  golem:{hp:400, atk:20, speed:0.1},
  shaman:{hp:120, atk:12, speed:0.25},
  wolf:{hp:80, atk:10, speed:0.5},
  ogre:{hp:600, atk:40},
  dragon:{hp:1500, atk:100}
};

// ラベル更新
function updateLabel(id){
  document.getElementById(id+"_val").innerText = document.getElementById(id).value;
}

// 設定表示
function showSettings(){
  document.getElementById("menu").style.display="none";
  document.getElementById("settings").style.display="block";
}

// 戻る
function backToMenu(){
  document.getElementById("settings").style.display="none";
  document.getElementById("menu").style.display="block";
}

// 設定反映＆ゲーム開始
function applySettingsAndStart(){
  for (let key in unitStats){
    for (let prop in unitStats[key]){
      let id = `${key}_${prop}`;
      if (document.getElementById(id)){
        let val = document.getElementById(id).value;
        unitStats[key][prop] = parseFloat(val);
      }
    }
  }
  startGame();
}

// ゲーム開始
function startGame(){
  document.getElementById("menu").style.display="none";
  document.getElementById("settings").style.display="none";
  document.getElementById("title").style.display="none";
  document.getElementById("gameCanvas").style.display="block";

  // ここでゲーム処理を呼び出し（フェーズ1のコードを移植）
  alert("ゲーム開始！（ここにフェーズ1の処理を統合します）");
}
</script>
</body>
</html>
